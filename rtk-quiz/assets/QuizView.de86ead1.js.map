{"version":3,"file":"QuizView.de86ead1.js","sources":["../../../node_modules/.pnpm/ethers@6.10.0/node_modules/ethers/lib.esm/providers/provider-browser.js","../../src/components/SuccessIcon.vue","../../src/components/CheckedIcon.vue","../../src/components/UncheckedIcon.vue","../../../node_modules/.pnpm/vue-content-loader@2.0.1_vue@3.2.45/node_modules/vue-content-loader/dist/vue-content-loader.es.js","../../src/views/QuizView.vue"],"sourcesContent":["import { assertArgument } from \"../utils/index.js\";\nimport { JsonRpcApiPollingProvider } from \"./provider-jsonrpc.js\";\n;\n/**\n *  A **BrowserProvider** is intended to wrap an injected provider which\n *  adheres to the [[link-eip-1193]] standard, which most (if not all)\n *  currently do.\n */\nexport class BrowserProvider extends JsonRpcApiPollingProvider {\n    #request;\n    /**\n     *  Connnect to the %%ethereum%% provider, optionally forcing the\n     *  %%network%%.\n     */\n    constructor(ethereum, network) {\n        super(network, { batchMaxCount: 1 });\n        this.#request = async (method, params) => {\n            const payload = { method, params };\n            this.emit(\"debug\", { action: \"sendEip1193Request\", payload });\n            try {\n                const result = await ethereum.request(payload);\n                this.emit(\"debug\", { action: \"receiveEip1193Result\", result });\n                return result;\n            }\n            catch (e) {\n                const error = new Error(e.message);\n                error.code = e.code;\n                error.data = e.data;\n                error.payload = payload;\n                this.emit(\"debug\", { action: \"receiveEip1193Error\", error });\n                throw error;\n            }\n        };\n    }\n    async send(method, params) {\n        await this._start();\n        return await super.send(method, params);\n    }\n    async _send(payload) {\n        assertArgument(!Array.isArray(payload), \"EIP-1193 does not support batch request\", \"payload\", payload);\n        try {\n            const result = await this.#request(payload.method, payload.params || []);\n            return [{ id: payload.id, result }];\n        }\n        catch (e) {\n            return [{\n                    id: payload.id,\n                    error: { code: e.code, data: e.data, message: e.message }\n                }];\n        }\n    }\n    getRpcError(payload, error) {\n        error = JSON.parse(JSON.stringify(error));\n        // EIP-1193 gives us some machine-readable error codes, so rewrite\n        // them into \n        switch (error.error.code || -1) {\n            case 4001:\n                error.error.message = `ethers-user-denied: ${error.error.message}`;\n                break;\n            case 4200:\n                error.error.message = `ethers-unsupported: ${error.error.message}`;\n                break;\n        }\n        return super.getRpcError(payload, error);\n    }\n    /**\n     *  Resolves to ``true`` if the provider manages the %%address%%.\n     */\n    async hasSigner(address) {\n        if (address == null) {\n            address = 0;\n        }\n        const accounts = await this.send(\"eth_accounts\", []);\n        if (typeof (address) === \"number\") {\n            return (accounts.length > address);\n        }\n        address = address.toLowerCase();\n        return accounts.filter((a) => (a.toLowerCase() === address)).length !== 0;\n    }\n    async getSigner(address) {\n        if (address == null) {\n            address = 0;\n        }\n        if (!(await this.hasSigner(address))) {\n            try {\n                //const resp = \n                await this.#request(\"eth_requestAccounts\", []);\n                //console.log(\"RESP\", resp);\n            }\n            catch (error) {\n                const payload = error.payload;\n                throw this.getRpcError(payload, { id: payload.id, error });\n            }\n        }\n        return await super.getSigner(address);\n    }\n}\n//# sourceMappingURL=provider-browser.js.map","<template>\n  <svg\n    width=\"97\"\n    height=\"96\"\n    viewBox=\"0 0 97 96\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_35_4428)\">\n      <path\n        d=\"M48.5 8C26.42 8 8.5 25.92 8.5 48C8.5 70.08 26.42 88 48.5 88C70.58 88 88.5 70.08 88.5 48C88.5 25.92 70.58 8 48.5 8ZM40.5 68L20.5 48L26.14 42.36L40.5 56.68L70.86 26.32L76.5 32L40.5 68Z\"\n        fill=\"#6efffa\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_35_4428\">\n        <rect width=\"96\" height=\"96\" fill=\"white\" transform=\"translate(0.5)\" />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n\n<script setup lang=\"ts\"></script>\n\n<style scoped lang=\"postcss\"></style>\n","<template>\n  <svg\n    width=\"24\"\n    height=\"25\"\n    viewBox=\"0 0 24 25\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_56_971)\">\n      <path\n        d=\"M12 7.1333C9.24 7.1333 7 9.3733 7 12.1333C7 14.8933 9.24 17.1333 12 17.1333C14.76 17.1333 17 14.8933 17 12.1333C17 9.3733 14.76 7.1333 12 7.1333ZM12 2.1333C6.48 2.1333 2 6.6133 2 12.1333C2 17.6533 6.48 22.1333 12 22.1333C17.52 22.1333 22 17.6533 22 12.1333C22 6.6133 17.52 2.1333 12 2.1333ZM12 20.1333C7.58 20.1333 4 16.5533 4 12.1333C4 7.7133 7.58 4.1333 12 4.1333C16.42 4.1333 20 7.7133 20 12.1333C20 16.5533 16.42 20.1333 12 20.1333Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_56_971\">\n        <rect\n          width=\"24\"\n          height=\"24\"\n          fill=\"white\"\n          transform=\"translate(0 0.133301)\"\n        />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n\n<script setup lang=\"ts\"></script>\n\n<style scoped lang=\"postcss\"></style>\n","<template>\n  <svg\n    width=\"24\"\n    height=\"25\"\n    viewBox=\"0 0 24 25\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_56_273)\">\n      <path\n        d=\"M12 2.1333C6.48 2.1333 2 6.6133 2 12.1333C2 17.6533 6.48 22.1333 12 22.1333C17.52 22.1333 22 17.6533 22 12.1333C22 6.6133 17.52 2.1333 12 2.1333ZM12 20.1333C7.58 20.1333 4 16.5533 4 12.1333C4 7.7133 7.58 4.1333 12 4.1333C16.42 4.1333 20 7.7133 20 12.1333C20 16.5533 16.42 20.1333 12 20.1333Z\"\n        fill=\"currentColor\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_56_273\">\n        <rect\n          width=\"24\"\n          height=\"24\"\n          fill=\"white\"\n          transform=\"translate(0 0.133301)\"\n        />\n      </clipPath>\n    </defs>\n  </svg>\n</template>\n\n<script setup lang=\"ts\"></script>\n\n<style scoped lang=\"postcss\"></style>\n","import { defineComponent, computed, createVNode, mergeProps } from 'vue';\n\nvar uid = (function () {\n  return Math.random().toString(36).substring(2);\n});\n\nvar ContentLoader = defineComponent({\n  name: 'ContentLoader',\n  props: {\n    width: {\n      type: [Number, String]\n    },\n    height: {\n      type: [Number, String]\n    },\n    viewBox: {\n      type: String\n    },\n    preserveAspectRatio: {\n      type: String,\n      \"default\": 'xMidYMid meet'\n    },\n    speed: {\n      type: Number,\n      \"default\": 2\n    },\n    baseUrl: {\n      type: String,\n      \"default\": ''\n    },\n    primaryColor: {\n      type: String,\n      \"default\": '#f9f9f9'\n    },\n    secondaryColor: {\n      type: String,\n      \"default\": '#ecebeb'\n    },\n    primaryOpacity: {\n      type: Number,\n      \"default\": 1\n    },\n    secondaryOpacity: {\n      type: Number,\n      \"default\": 1\n    },\n    uniqueKey: {\n      type: String\n    },\n    animate: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  setup: function setup(props) {\n    var idClip = computed(function () {\n      return props.uniqueKey ? \"\".concat(props.uniqueKey, \"-idClip\") : uid();\n    });\n    var idGradient = computed(function () {\n      return props.uniqueKey ? \"\".concat(props.uniqueKey, \"-idGradient\") : uid();\n    });\n    var width = computed(function () {\n      var _a;\n\n      return (_a = props.width) !== null && _a !== void 0 ? _a : 400;\n    });\n    var height = computed(function () {\n      var _a;\n\n      return (_a = props.height) !== null && _a !== void 0 ? _a : 130;\n    });\n    var computedViewBox = computed(function () {\n      var _a;\n\n      return (_a = props.viewBox) !== null && _a !== void 0 ? _a : \"0 0 \".concat(width.value, \" \").concat(height.value);\n    });\n    return {\n      idClip: idClip,\n      idGradient: idGradient,\n      computedViewBox: computedViewBox\n    };\n  },\n  render: function render() {\n    return createVNode(\"svg\", {\n      \"width\": this.width,\n      \"height\": this.height,\n      \"viewBox\": this.computedViewBox,\n      \"version\": \"1.1\",\n      \"preserveAspectRatio\": this.preserveAspectRatio\n    }, [createVNode(\"rect\", {\n      \"style\": {\n        fill: \"url(\".concat(this.baseUrl, \"#\").concat(this.idGradient, \")\")\n      },\n      \"clip-path\": \"url(\".concat(this.baseUrl, \"#\").concat(this.idClip, \")\"),\n      \"x\": \"0\",\n      \"y\": \"0\",\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }, null), createVNode(\"defs\", null, [createVNode(\"clipPath\", {\n      \"id\": this.idClip\n    }, [this.$slots[\"default\"] ? this.$slots[\"default\"]() : createVNode(\"rect\", {\n      \"x\": \"0\",\n      \"y\": \"0\",\n      \"rx\": \"5\",\n      \"ry\": \"5\",\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }, null)]), createVNode(\"linearGradient\", {\n      \"id\": this.idGradient\n    }, [createVNode(\"stop\", {\n      \"offset\": \"0%\",\n      \"stop-color\": this.primaryColor,\n      \"stop-opacity\": this.primaryOpacity\n    }, [this.animate ? createVNode(\"animate\", {\n      \"attributeName\": \"offset\",\n      \"values\": \"-2; 1\",\n      \"dur\": \"\".concat(this.speed, \"s\"),\n      \"repeatCount\": \"indefinite\"\n    }, null) : null]), createVNode(\"stop\", {\n      \"offset\": \"50%\",\n      \"stop-color\": this.secondaryColor,\n      \"stop-opacity\": this.secondaryOpacity\n    }, [this.animate ? createVNode(\"animate\", {\n      \"attributeName\": \"offset\",\n      \"values\": \"-1.5; 1.5\",\n      \"dur\": \"\".concat(this.speed, \"s\"),\n      \"repeatCount\": \"indefinite\"\n    }, null) : null]), createVNode(\"stop\", {\n      \"offset\": \"100%\",\n      \"stop-color\": this.primaryColor,\n      \"stop-opacity\": this.primaryOpacity\n    }, [this.animate ? createVNode(\"animate\", {\n      \"attributeName\": \"offset\",\n      \"values\": \"-1; 2\",\n      \"dur\": \"\".concat(this.speed, \"s\"),\n      \"repeatCount\": \"indefinite\"\n    }, null) : null])])])]);\n  }\n});\n\nvar BulletListLoader = defineComponent(function (props, _a) {\n  var attrs = _a.attrs;\n  return function () {\n    return createVNode(ContentLoader, attrs, {\n      \"default\": function _default() {\n        return [createVNode(\"circle\", {\n          \"cx\": \"10\",\n          \"cy\": \"20\",\n          \"r\": \"8\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"25\",\n          \"y\": \"15\",\n          \"rx\": \"5\",\n          \"ry\": \"5\",\n          \"width\": \"220\",\n          \"height\": \"10\"\n        }, null), createVNode(\"circle\", {\n          \"cx\": \"10\",\n          \"cy\": \"50\",\n          \"r\": \"8\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"25\",\n          \"y\": \"45\",\n          \"rx\": \"5\",\n          \"ry\": \"5\",\n          \"width\": \"220\",\n          \"height\": \"10\"\n        }, null), createVNode(\"circle\", {\n          \"cx\": \"10\",\n          \"cy\": \"80\",\n          \"r\": \"8\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"25\",\n          \"y\": \"75\",\n          \"rx\": \"5\",\n          \"ry\": \"5\",\n          \"width\": \"220\",\n          \"height\": \"10\"\n        }, null), createVNode(\"circle\", {\n          \"cx\": \"10\",\n          \"cy\": \"110\",\n          \"r\": \"8\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"25\",\n          \"y\": \"105\",\n          \"rx\": \"5\",\n          \"ry\": \"5\",\n          \"width\": \"220\",\n          \"height\": \"10\"\n        }, null)];\n      }\n    });\n  };\n});\n\nvar CodeLoader = defineComponent(function (props, _a) {\n  var attrs = _a.attrs;\n  return function () {\n    return createVNode(ContentLoader, attrs, {\n      \"default\": function _default() {\n        return [createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"0\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"70\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"80\",\n          \"y\": \"0\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"100\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"190\",\n          \"y\": \"0\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"10\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"15\",\n          \"y\": \"20\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"130\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"155\",\n          \"y\": \"20\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"130\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"15\",\n          \"y\": \"40\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"90\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"115\",\n          \"y\": \"40\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"60\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"185\",\n          \"y\": \"40\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"60\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"60\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"30\",\n          \"height\": \"10\"\n        }, null)];\n      }\n    });\n  };\n});\n\nvar FacebookLoader = defineComponent(function (props, _a) {\n  var attrs = _a.attrs;\n  return function () {\n    return createVNode(ContentLoader, attrs, {\n      \"default\": function _default() {\n        return [createVNode(\"rect\", {\n          \"x\": \"70\",\n          \"y\": \"15\",\n          \"rx\": \"4\",\n          \"ry\": \"4\",\n          \"width\": \"117\",\n          \"height\": \"6.4\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"70\",\n          \"y\": \"35\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"85\",\n          \"height\": \"6.4\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"80\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"350\",\n          \"height\": \"6.4\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"100\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"380\",\n          \"height\": \"6.4\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"120\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"201\",\n          \"height\": \"6.4\"\n        }, null), createVNode(\"circle\", {\n          \"cx\": \"30\",\n          \"cy\": \"30\",\n          \"r\": \"30\"\n        }, null)];\n      }\n    });\n  };\n});\n\nvar ListLoader = defineComponent(function (props, _a) {\n  var attrs = _a.attrs;\n  return function () {\n    return createVNode(ContentLoader, attrs, {\n      \"default\": function _default() {\n        return [createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"0\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"250\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"20\",\n          \"y\": \"20\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"220\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"20\",\n          \"y\": \"40\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"170\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"60\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"250\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"20\",\n          \"y\": \"80\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"200\",\n          \"height\": \"10\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"20\",\n          \"y\": \"100\",\n          \"rx\": \"3\",\n          \"ry\": \"3\",\n          \"width\": \"80\",\n          \"height\": \"10\"\n        }, null)];\n      }\n    });\n  };\n});\n\nvar InstagramLoader = defineComponent(function (props, _a) {\n  var attrs = _a.attrs;\n  return function () {\n    return createVNode(ContentLoader, mergeProps(attrs, {\n      \"viewBox\": \"0 0 400 480\"\n    }), {\n      \"default\": function _default() {\n        return [createVNode(\"circle\", {\n          \"cx\": \"30\",\n          \"cy\": \"30\",\n          \"r\": \"30\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"75\",\n          \"y\": \"13\",\n          \"rx\": \"4\",\n          \"ry\": \"4\",\n          \"width\": \"100\",\n          \"height\": \"13\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"75\",\n          \"y\": \"37\",\n          \"rx\": \"4\",\n          \"ry\": \"4\",\n          \"width\": \"50\",\n          \"height\": \"8\"\n        }, null), createVNode(\"rect\", {\n          \"x\": \"0\",\n          \"y\": \"70\",\n          \"rx\": \"5\",\n          \"ry\": \"5\",\n          \"width\": \"400\",\n          \"height\": \"400\"\n        }, null)];\n      }\n    });\n  };\n});\n\nexport { BulletListLoader, CodeLoader, ContentLoader, FacebookLoader, InstagramLoader, ListLoader };\n","<script setup lang=\"ts\">\nimport { ethers } from \"ethers\";\nimport { onMounted, ref } from \"vue\";\n\nimport { useQuiz, useNFT } from \"../contracts\";\nimport { useEthereumStore } from \"../stores/ethereum\";\nimport AppButton from \"@/components/AppButton.vue\";\nimport SuccessInfo from \"@/components/SuccessInfo.vue\";\nimport CheckedIcon from \"@/components/CheckedIcon.vue\";\nimport UncheckedIcon from \"@/components/UncheckedIcon.vue\";\nimport QuizDetailsLoader from \"@/components/QuizDetailsLoader.vue\";\n// import { token } from \"@oasisprotocol/demo-quiz-backend/lib/cjs/typechain-types/@openzeppelin/contracts\";\nconsole.log(\"Debug: QuizView\");\nconst props = defineProps<{ coupon: string }>();\n\nconst quiz = useQuiz();\nconst eth = useEthereumStore();\nconst nft = ref<any | null>(null);\nconst addrNFT = ref(\"\");\nconst tokenReward = ref(0);\nconsole.log(\"Debug: QuizView loaded variables.\");\n\nconst errors = ref<string[]>([]);\nconst isLoading = ref(false);\nconst isCheckingAnswers = ref<Boolean>(false);\nconst isClaimingReward = ref<Boolean>(false);\nconst isAddingReward = ref<Boolean>(false);\nconst questions = ref<Question[]>([]);\nconst selectedChoices = ref<bigint[]>([]);\nconst allQuestionsAnswered = ref<Boolean>(false);\nconst correctVector = ref<boolean[]>([]);\nconst address = ref(\"\");\nconst isSpinning = ref(false);\n\nconst couponValid = ref<Boolean>(false);\nconst answersChecked = ref<Boolean>(false);\nconst answersCorrect = ref<Boolean>(false);\nconst rewardClaimed = ref<Boolean>(false);\nconst nftClaimed = ref<Boolean>(false);\nconst tokenClaimed = ref<Boolean>(false);\nconst userImages = ref<string[]>([]);\nconst tokenId = ref<string>(\"\");\n\nconsole.log(\"Debug: QuizView loaded variables 2.\");\n\n\ninterface Questions {\n  questions: Question[];\n}\n\ninterface Question {\n  question: string;\n  choices: string[];\n}\n\nfunction handleError(error: Error, errorMessage: string) {\n  errors.value = Array();\n  errors.value.push(`${errorMessage}`);\n  console.error(error);\n}\n\nasync function fetchNFTAddress(){\n\n}\n\nasync function onChoiceClick(qId: number, choiceId: number): Promise<void> {\n  console.log(\"Debug: Choice clicked\");\n  selectedChoices.value[qId] = BigInt(choiceId);\n\n  let allAns = true;\n  for (let i = 0; i < selectedChoices.value.length; i++) {\n    if (selectedChoices.value[i] === undefined) {\n      allAns = false;\n      break;\n    }\n  }\n  allQuestionsAnswered.value = allAns;\n}\n\nasync function doCheckAnswers(): Promise<void> {\n  console.log(\"Debug: Checking answers\");\n  const [cv, gaslessTx] = await quiz.value!.checkAnswers(\n    props.coupon,\n    selectedChoices.value,\n    ethers.ZeroAddress\n  );\n  let allCorrect = true;\n  for (let i = 0; i < cv.length; i++) {\n    if (!cv[i]) {\n      allCorrect = false;\n      break;\n    }\n  }\n  answersChecked.value = true;\n  answersCorrect.value = allCorrect;\n  correctVector.value = cv;\n}\n\nasync function fetchQuestions(): Promise<void> {\n  try {\n    console.log(\"Debug: Fetching questions\");\n    addrNFT.value = await quiz.value!.nftAddress();\n    // tokenReward.value = await quiz.value!.getTokenReward();\n    nft.value = useNFT(addrNFT.value).value;\n    isLoading.value = true;\n    questions.value = await quiz.value!.getQuestions(props.coupon);\n    selectedChoices.value = Array(questions.value.length); // prepare an array of undefined values until the answer is selected.\n    couponValid.value = true;\n    console.log(\"Debug: Questions fetched\");\n  } catch (e) {\n    handleError(e as Error, \"Coupon not valid\");\n  } finally {\n    isLoading.value = false;\n  }\n}\n\nasync function fetchImages(): Promise<void> {\n  console.log(\"Debug: Fetching images\");\n  try {\n    console.log(address.value);\n    isLoading.value = true;\n    console.log(\"Debug: Fetching images\");\n    const tokens = await nft.value!.getOwnedTokens(address.value);\n    console.log(tokens);\n    for (let i = 0; i < tokens.length; i++) {\n      console.log(tokens[i]);\n      const tokenURI = await nft.value!.tokenURI(tokens[i]);\n      const modifiedTokenURI = tokenURI.replace(\"ipfs://\", \"https://ipfs.io/ipfs/\");\n      const response = await fetch(modifiedTokenURI);\n      const metadata = await response.json();\n      userImages.value.push(metadata.image.replace(\"ipfs://\", \"https://ipfs.io/ipfs/\"));\n      console.log(metadata);\n    }\n  } catch (e) {\n    handleError(e as Error, \"Image not valid\");\n  } finally {\n    isLoading.value = false;\n  }\n}\n\nasync function claimReward(e: Event): Promise<void> {\n  console.log(\"Debug: Claiming reward\");\n  if (e.target instanceof HTMLFormElement) {\n    e.target.checkValidity();\n    if (!e.target.reportValidity()) return;\n  }\n  console.log(\"Debug: Claiming reward\");\n  e.preventDefault();\n\n  const TIMEOUT_LIMIT = 100;\n  let timeout = 0;\n  while (!rewardClaimed.value && timeout < TIMEOUT_LIMIT) {\n    try {\n      isClaimingReward.value = true;\n      console.log(address.value);\n      let receipt;\n      const gaslessKeyPair = await quiz.value!.getGaslessKeyPair();\n      const [cv, gaslessTx] = await quiz.value!.checkAnswers(\n        props.coupon,\n        selectedChoices.value,\n        ethers.getAddress(address.value)\n      );\n      console.log(gaslessTx);\n      // If gasless KeyPair is set, checkAnswers will return gaslessTx\n      if (gaslessKeyPair[0] !== ethers.ZeroAddress) {\n        console.log(cv);\n        console.log(gaslessTx);\n        receipt = await (\n          await eth.provider.broadcastTransaction(gaslessTx)\n        ).wait(); // gasless version\n        console.log(\"Transaction confirmed\");\n        rewardClaimed.value = true;\n        if ((quiz.value) && (addrNFT.value !== '0x0000000000000000000000000000000000000000'))\n        {\n          tokenId.value = (\n            (await nft.value!.totalSupply()) - BigInt(1)\n          ).toString();\n        }\n\n      } else {\n        console.log(\"Requesting account access\");\n        // Check the network chain ID\n        const chainId = await window.ethereum.request({\n          method: \"eth_chainId\",\n        });\n        const expectedChainId = import.meta.env.VITE_NETWORK!;\n        const rpcUrl = import.meta.env.VITE_WEB3_GATEWAY!;\n        const chainName = import.meta.env.VITE_CHAIN_NAME!;\n\n        if (chainId !== expectedChainId) {\n          // Request network change\n          await window.ethereum.request({\n            method: \"wallet_addEthereumChain\",\n            params: [\n              {\n                chainId: expectedChainId,\n                rpcUrls: [rpcUrl],\n                chainName: chainName,\n                blockExplorerUrls: [], //[\"https://explorer.oasis.io/testnet/sapphire\"],\n                nativeCurrency: {\n                  name: \"ROSE\",\n                  symbol: \"ROSE\",\n                  decimals: 18,\n                },\n              },\n            ],\n          });\n        }\n        // Request MetaMask account access\n        await window.ethereum.request({ method: \"eth_requestAccounts\" });\n        console.log(\"MetaMask is connected and on the correct network\");\n        // Create a provider and signer\n        const provider = new ethers.BrowserProvider(window.ethereum);\n        const signer = await provider.getSigner();\n\n        const quizWithSigner = quiz.value!.connect(signer);\n\n        try {\n          // Send the transaction\n          const tx_hash = await quizWithSigner.claimReward(gaslessTx);\n          console.log(\"Transaction sent:\", tx_hash);\n          await tx_hash.wait();\n          console.log(\"Transaction confirmed\");\n          rewardClaimed.value = true;\n\n          if ((quiz.value) && (addrNFT.value !== '0x0000000000000000000000000000000000000000'))\n          {\n            tokenId.value = (\n              (await nft.value!.totalSupply()) - BigInt(1)\n            ).toString();\n          }\n        } catch (error) {\n          console.error(\n            \"User denied transaction signature or error occurred:\",\n            error\n          );\n          return;\n        }\n      }\n    } catch (e: any) {\n      if (++timeout == TIMEOUT_LIMIT) {\n        handleError(e, \"Error while claiming the reward\");\n      }\n    }\n  }\n  if (addrNFT.value !== '0x0000000000000000000000000000000000000000')\n  {\n    await fetchImages();\n  }\n\n  isClaimingReward.value = false;\n}\n\nasync function checkAnswers(e: Event): Promise<void> {\n  console.log(\"Debug: Checking answers\");\n  e.preventDefault();\n  try {\n    isCheckingAnswers.value = true;\n    await doCheckAnswers();\n  } catch (e: any) {\n    handleError(e.reason, e.message);\n  } finally {\n    isCheckingAnswers.value = false;\n  }\n}\n\nconst addNFTToMetaMask = async () => {\n  console.log(\"Debug: Adding NFT to MetaMask\");\n  try {\n    isAddingReward.value = true;\n\n    if (typeof window.ethereum !== \"undefined\") {\n      await window.ethereum.request({ method: \"eth_requestAccounts\" });\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n\n      const imageUrl = userImages.value[userImages.value.length - 1];\n      console.log(imageUrl);\n      console.log(\"Requesting account access\");\n      // Check the network chain ID\n      const chainId = await window.ethereum.request({\n        method: \"eth_chainId\",\n      });\n      const expectedChainId = import.meta.env.VITE_NETWORK!;\n      const rpcUrl = import.meta.env.VITE_WEB3_GATEWAY!;\n      const chainName = import.meta.env.VITE_CHAIN_NAME!;\n      if (chainId !== expectedChainId) {\n          // Request network change\n          await window.ethereum.request({\n            method: \"wallet_addEthereumChain\",\n            params: [\n              {\n                chainId: expectedChainId,\n                rpcUrls: [rpcUrl],\n                chainName: chainName,\n                nativeCurrency: {\n                  name: \"ROSE\",\n                  symbol: \"ROSE\",\n                  decimals: 18,\n                },\n              },\n            ],\n          });\n        }\n      await window.ethereum.request({\n        method: \"wallet_watchAsset\",\n        params: {\n          type: \"ERC721\",\n          options: {\n            address: addrNFT.value,\n            tokenId: tokenId.value,\n            // image: imageUrl,\n          },\n        },\n      });\n\n      console.log(\"NFT added to MetaMask successfully\");\n    } else {\n      console.error(\"MetaMask is not installed\");\n    }\n  } catch (error) {\n    console.error(\"Error adding NFT to MetaMask:\", error);\n  } finally {\n    isAddingReward.value = false;\n  }\n};\n\n// Method to handle the click event\nconst handleClick = () => {\n  isSpinning.value = true;\n\n  // Remove the class after the animation duration to allow repeated clicks\n  setTimeout(() => {\n    isSpinning.value = false;\n  }, 1000); // Duration matches the animation length (1s)\n};\n\nonMounted(async () => {\n  await fetchQuestions();\n});\n</script>\n\n\n<template>\n  <div v-if=\"errors.length > 0\" class=\"text-red-500 px-3 mt-5 rounded-xl-sm\">\n    <span class=\"font-bold\">Error:</span>\n    <div v-for=\"error in errors\" :key=\"error\">{{ error }}</div>\n  </div>\n  <section v-if=\"couponValid && !answersCorrect\">\n    <div v-if=\"questions\">\n      <form @submit=\"checkAnswers\">\n        <fieldset\n          class=\"mb-5\"\n          v-for=\"[qId, question] in Object.entries(questions)\"\n          :key=\"qId\"\n        >\n          <p style=\"cursor: default\" class=\"text-white text-base mb-5\">\n            {{ parseInt(qId) + 1 }}. {{ question.question }}\n            <span v-if=\"answersChecked\">\n              <span v-if=\"correctVector[parseInt(qId)]\">‚úÖ</span>\n              <span v-if=\"!correctVector[parseInt(qId)]\">‚ùå</span>\n            </span>\n          </p>\n          <AppButton\n            v-for=\"(choice, choiceId) in question.choices\"\n            :key=\"choiceId\"\n            :class=\"{\n              selected: selectedChoices[parseInt(qId)] === BigInt(choiceId),\n              'pointer-events-none': isLoading,\n            }\"\n            class=\"choice-btn mb-2 w-full\"\n            variant=\"choice\"\n            @click=\"onChoiceClick(parseInt(qId), choiceId)\"\n          >\n            <span class=\"flex gap-2\">\n              <div class=\"align-middle\">\n                <CheckedIcon\n                  v-if=\"selectedChoices[parseInt(qId)] === BigInt(choiceId)\"\n                />\n                <UncheckedIcon v-else />\n              </div>\n              <span class=\"leading-6 normal-case text-left\">{{ choice }}</span>\n            </span>\n          </AppButton>\n        </fieldset>\n\n        <div\n          v-if=\"errors.length > 0\"\n          class=\"text-red-500 px-3 mt-5 rounded-xl-sm\"\n        >\n          <span class=\"font-bold\">Error:</span>\n          <div v-for=\"error in errors\" :key=\"error\">{{ error }}</div>\n        </div>\n        <div class=\"flex justify-between items-start mt-6 mb-20\">\n          <AppButton\n            type=\"submit\"\n            variant=\"primary\"\n            :disabled=\"isLoading || !allQuestionsAnswered\"\n            @click=\"checkAnswers\"\n          >\n            <span v-if=\"isCheckingAnswers\">Preverjam odgovore‚Ä¶</span>\n            <span v-else>Preveri odgovore</span>\n          </AppButton>\n        </div>\n      </form>\n    </div>\n\n    <QuizDetailsLoader v-else />\n  </section>\n  <section class=\"pt-5\" v-if=\"answersCorrect && !rewardClaimed\">\n    <SuccessInfo>\n      <h2 class=\"text-2xl text-white text-base mb-5 mt-10\">\n        Kviz ste uspe≈°no re≈°ili!\n      </h2>\n    </SuccessInfo>\n\n    <section>\n      <p class=\"text-white text-base mb-5 mt-10\">\n        ƒåe ≈æelite prejeti nagrado, v spodnje polje vpi≈°ite naslov va≈°e kriptodenarnice.\n        Kovanƒçke ROSE boste prejeli na verigi <a href=\"https://docs.oasis.io/build/sapphire\" target=\"_blank\">Oasis Sapphire Mainnet</a>.\n      </p>\n      <form @submit=\"claimReward\">\n        <div class=\"form-group\">\n          <input\n            type=\"text\"\n            id=\"addressText\"\n            class=\"peer\"\n            placeholder=\" \"\n            v-model=\"address\"\n            pattern=\"^(0x)?[0-9a-fA-F]{40}$\"\n            required\n          />\n          <label\n            for=\"addressText\"\n            class=\"peer-focus:text-primaryDark peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-5\"\n          >\n            Va≈° naslov (0x...):\n            <span class=\"text-red-500\">*</span>\n          </label>\n        </div>\n        <details class=\"text-white mb-5\">\n          <summary class=\"cursor-pointer mb-3 text-right\">Kaj je kriptodenarnica?</summary>\n          <p class=\"ml-3.5\">\n            Kriptodenarnica hrani va≈° zasebni kljuƒç, s katerim podpisujete razliƒçne\n            transakcije na omre≈æju, na primer za po≈°iljanje va≈°ega virtualnega\n            denarja. Denarnica je lahko v obliki\n            samostojne aplikacije na raƒçunalniku ali telefonu, kot raz≈°iritev za\n            spletni brskalnik, lahko pa je samostojna naprava, saj je s tem najbolj\n            odporna na zlonamerno kodo, ki bi lahko odtujila va≈° zasebni kljuƒç.</p>\n          <p class=\"ml-3.5 mb-10\">\n            ƒåe ste zaƒçetnik in zasebnega kljuƒça ≈°e nimate, predlagamo uporabo\n            denarnice <a href=\"https://metamask.io/download/\" target=\"_blank\">Metamask</a>.\n            Po namestitvi ne pozabite povezati denarnice z omre≈æjem Oasis Sapphire. To\n            najla≈æje storite s pritiskom na enega od gumbov \"Add to Metamask\" v seznamu\n            <a href=\"https://docs.oasis.io/build/sapphire/network#rpc-endpoints\" target=\"_blank\">dostopnih toƒçk Mainnet</a>.\n          </p>\n        </details>\n        <AppButton\n          class=\"mb-20 no-capitalize\"\n          type=\"submit\"\n          variant=\"primary\"\n          :disabled=\"isClaimingReward\"\n        >\n          <span class=\"normal-case\" v-if=\"isClaimingReward\"\n\t    >Generiram transakcijo in po≈°iljam nagrado‚Ä¶</span\n          >\n          <span class=\"normal-case\" v-else>Prejmi nagrado</span>\n        </AppButton>\n      </form>\n    </section>\n  </section>\n  <section v-if=\"rewardClaimed\">\n    <SuccessInfo class=\"mb-20\">\n      <section v-if=\" addrNFT !== '0x0000000000000000000000000000000000000000'\">\n        <h2 class=\"text-white text-3xl mb-10\">\n        Congratulations, you received an NFT:\n        </h2>\n        <div class=\"featured-container\">\n        <img\n          v-if=\"userImages.length > 0\"\n          :src=\"userImages[userImages.length - 1]\"\n          :key=\"userImages[userImages.length - 1]\"\n          alt=\"Featured\"\n          :class=\"['featured-image', { 'animate-spin': isSpinning }]\"\n          @click=\"handleClick\"\n        />\n        </div>\n        <p class=\"text-white\">\n          Token ID: <strong>{{ tokenId }}</strong>\n        </p>\n        <p class=\"text-white mb-10\">\n          NFT Contract Address: <strong>{{ addrNFT }}</strong>\n        </p>\n      </section>\n\n      <h3 class=\"text-white text-3xl mb-10\">Hvala za sodelovanje v nagradnem kvizu!</h3>\n      <section v-if=\" addrNFT !== '0x0000000000000000000000000000000000000000'\">\n        <AppButton\n          class=\"mb-20 no-capitalize\"\n          type=\"submit\"\n          variant=\"primary\"\n          @click=\"addNFTToMetaMask\"\n        >\n          <span class=\"normal-case\" v-if=\"isAddingReward\"\n            >Adding NFT to MetaMask...</span\n          >\n          <span class=\"normal-case\" v-else>Add reward to wallet</span>\n        </AppButton>\n      </section>\n      <p class=\"text-white\">\n        Vabljeni, da sprogramirate <a href=\"https://docs.oasis.io/build/sapphire/quickstart\" target=\"_blank\">aplikacijo na omre≈æju Oasis Sapphire.</a>\n      </p>\n      <p class=\"text-white\">\n        <br/>\n        ƒåe potrebujete pomoƒç ali pa ≈æelite svoje znanje deliti ostalim, se pridru≈æite slovenski skupnosti Oasis na <a href=\"https://oasis.io/discord\" target=\"_blank\">Discord kanalu #slovenia üá∏üáÆ </a>.\n      </p>\n    </SuccessInfo>\n  </section>\n</template>\n\n<style lang=\"postcss\" scoped>\n.error {\n  @apply text-red-500;\n}\n</style>\n"],"names":["BrowserProvider","JsonRpcApiPollingProvider","ethereum","network","__privateAdd","_request","__privateSet","method","params","payload","result","e","error","assertArgument","__privateGet","address","accounts","a","_hoisted_1","_createElementVNode","_hoisted_4","_hoisted_2","_sfc_render","_ctx","_cache","uid","ContentLoader","defineComponent","props","idClip","computed","idGradient","width","_a","height","computedViewBox","createVNode","attrs","mergeProps","quiz","useQuiz","eth","useEthereumStore","nft","ref","addrNFT","errors","isLoading","isCheckingAnswers","isClaimingReward","isAddingReward","questions","selectedChoices","allQuestionsAnswered","correctVector","isSpinning","couponValid","answersChecked","answersCorrect","rewardClaimed","userImages","tokenId","handleError","errorMessage","onChoiceClick","qId","choiceId","allAns","i","doCheckAnswers","cv","gaslessTx","ethers.ZeroAddress","allCorrect","fetchQuestions","useNFT","fetchImages","tokens","modifiedTokenURI","metadata","claimReward","TIMEOUT_LIMIT","timeout","receipt","gaslessKeyPair","ethers.getAddress","chainId","expectedChainId","rpcUrl","chainName","signer","ethers.BrowserProvider","quizWithSigner","tx_hash","checkAnswers","addNFTToMetaMask","imageUrl","handleClick","onMounted"],"mappings":"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"}