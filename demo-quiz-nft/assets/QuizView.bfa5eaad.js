var X=(i,a,e)=>{if(!a.has(i))throw TypeError("Cannot "+e)};var G=(i,a,e)=>(X(i,a,"read from private field"),e?e.call(i):a.get(i)),ee=(i,a,e)=>{if(a.has(i))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(i):a.set(i,e)},te=(i,a,e,r)=>(X(i,a,"write to private field"),r?r.call(i,e):a.set(i,e),e);import{J as ve,a as se,_ as L,o as n,c as o,b as s,d as C,e as t,r as me,f as q,m as xe,g as U,w as A,u as le,h as Ce,i as ke,j as be,k as h,l as Se,F as O,n as P,p as m,A as D,q as Ie,v as $e,s as Ae,Z as ae,t as $,x,y as Re,z as re,B as Ee,C as Me}from"./index.b2ed1eda.js";var M;class ne extends ve{constructor(e,r,_){const w=Object.assign({},_!=null?_:{},{batchMaxCount:1});se(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(r,w);ee(this,M,void 0);te(this,M,async(g,p)=>{const R={method:g,params:p};this.emit("debug",{action:"sendEip1193Request",payload:R});try{const f=await e.request(R);return this.emit("debug",{action:"receiveEip1193Result",result:f}),f}catch(f){const v=new Error(f.message);throw v.code=f.code,v.data=f.data,v.payload=R,this.emit("debug",{action:"receiveEip1193Error",error:v}),v}})}async send(e,r){return await this._start(),await super.send(e,r)}async _send(e){se(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const r=await G(this,M).call(this,e.method,e.params||[]);return[{id:e.id,result:r}]}catch(r){return[{id:e.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(e,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(e,r)}async hasSigner(e){e==null&&(e=0);const r=await this.send("eth_accounts",[]);return typeof e=="number"?r.length>e:(e=e.toLowerCase(),r.filter(_=>_.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await G(this,M).call(this,"eth_requestAccounts",[])}catch(r){const _=r.payload;throw this.getRpcError(_,{id:_.id,error:r})}return await super.getSigner(e)}}M=new WeakMap;const Te={},Be={width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ne=s("g",{"clip-path":"url(#clip0_35_4428)"},[s("path",{d:"M48.5 8C26.42 8 8.5 25.92 8.5 48C8.5 70.08 26.42 88 48.5 88C70.58 88 88.5 70.08 88.5 48C88.5 25.92 70.58 8 48.5 8ZM40.5 68L20.5 48L26.14 42.36L40.5 56.68L70.86 26.32L76.5 32L40.5 68Z",fill:"#6efffa"})],-1),qe=s("defs",null,[s("clipPath",{id:"clip0_35_4428"},[s("rect",{width:"96",height:"96",fill:"white",transform:"translate(0.5)"})])],-1),Oe=[Ne,qe];function Ue(i,a){return n(),o("svg",Be,Oe)}const Le=L(Te,[["render",Ue]]),Ve={class:"success-info"},Fe=C({__name:"SuccessInfo",setup(i){return(a,e)=>(n(),o("div",Ve,[t(Le,{class:"mb-4"}),me(a.$slots,"default",{},void 0,!0)]))}});const ie=L(Fe,[["__scopeId","data-v-fd5ab0e8"]]),ze={},Pe={width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},De=s("g",{"clip-path":"url(#clip0_56_971)"},[s("path",{d:"M12 7.1333C9.24 7.1333 7 9.3733 7 12.1333C7 14.8933 9.24 17.1333 12 17.1333C14.76 17.1333 17 14.8933 17 12.1333C17 9.3733 14.76 7.1333 12 7.1333ZM12 2.1333C6.48 2.1333 2 6.6133 2 12.1333C2 17.6533 6.48 22.1333 12 22.1333C17.52 22.1333 22 17.6533 22 12.1333C22 6.6133 17.52 2.1333 12 2.1333ZM12 20.1333C7.58 20.1333 4 16.5533 4 12.1333C4 7.7133 7.58 4.1333 12 4.1333C16.42 4.1333 20 7.7133 20 12.1333C20 16.5533 16.42 20.1333 12 20.1333Z",fill:"currentColor"})],-1),Qe=s("defs",null,[s("clipPath",{id:"clip0_56_971"},[s("rect",{width:"24",height:"24",fill:"white",transform:"translate(0 0.133301)"})])],-1),Ze=[De,Qe];function Ge(i,a){return n(),o("svg",Pe,Ze)}const Ke=L(ze,[["render",Ge]]),je={},Je={width:"24",height:"25",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ye=s("g",{"clip-path":"url(#clip0_56_273)"},[s("path",{d:"M12 2.1333C6.48 2.1333 2 6.6133 2 12.1333C2 17.6533 6.48 22.1333 12 22.1333C17.52 22.1333 22 17.6533 22 12.1333C22 6.6133 17.52 2.1333 12 2.1333ZM12 20.1333C7.58 20.1333 4 16.5533 4 12.1333C4 7.7133 7.58 4.1333 12 4.1333C16.42 4.1333 20 7.7133 20 12.1333C20 16.5533 16.42 20.1333 12 20.1333Z",fill:"currentColor"})],-1),He=s("defs",null,[s("clipPath",{id:"clip0_56_273"},[s("rect",{width:"24",height:"24",fill:"white",transform:"translate(0 0.133301)"})])],-1),We=[Ye,He];function Xe(i,a){return n(),o("svg",Je,We)}const et=L(je,[["render",Xe]]);var oe=function(){return Math.random().toString(36).substring(2)},T=C({name:"ContentLoader",props:{width:{type:[Number,String]},height:{type:[Number,String]},viewBox:{type:String},preserveAspectRatio:{type:String,default:"xMidYMid meet"},speed:{type:Number,default:2},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},setup:function(a){var e=q(function(){return a.uniqueKey?"".concat(a.uniqueKey,"-idClip"):oe()}),r=q(function(){return a.uniqueKey?"".concat(a.uniqueKey,"-idGradient"):oe()}),_=q(function(){var p;return(p=a.width)!==null&&p!==void 0?p:400}),w=q(function(){var p;return(p=a.height)!==null&&p!==void 0?p:130}),g=q(function(){var p;return(p=a.viewBox)!==null&&p!==void 0?p:"0 0 ".concat(_.value," ").concat(w.value)});return{idClip:e,idGradient:r,computedViewBox:g}},render:function(){return t("svg",{width:this.width,height:this.height,viewBox:this.computedViewBox,version:"1.1",preserveAspectRatio:this.preserveAspectRatio},[t("rect",{style:{fill:"url(".concat(this.baseUrl,"#").concat(this.idGradient,")")},"clip-path":"url(".concat(this.baseUrl,"#").concat(this.idClip,")"),x:"0",y:"0",width:"100%",height:"100%"},null),t("defs",null,[t("clipPath",{id:this.idClip},[this.$slots.default?this.$slots.default():t("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"100%"},null)]),t("linearGradient",{id:this.idGradient},[t("stop",{offset:"0%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?t("animate",{attributeName:"offset",values:"-2; 1",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),t("stop",{offset:"50%","stop-color":this.secondaryColor,"stop-opacity":this.secondaryOpacity},[this.animate?t("animate",{attributeName:"offset",values:"-1.5; 1.5",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),t("stop",{offset:"100%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?t("animate",{attributeName:"offset",values:"-1; 2",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null])])])])}});C(function(i,a){var e=a.attrs;return function(){return t(T,e,{default:function(){return[t("circle",{cx:"10",cy:"20",r:"8"},null),t("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"},null),t("circle",{cx:"10",cy:"50",r:"8"},null),t("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"},null),t("circle",{cx:"10",cy:"80",r:"8"},null),t("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"},null),t("circle",{cx:"10",cy:"110",r:"8"},null),t("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"},null)]}})}});C(function(i,a){var e=a.attrs;return function(){return t(T,e,{default:function(){return[t("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10"},null),t("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10"},null),t("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10"},null),t("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10"},null),t("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10"},null),t("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10"},null),t("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10"},null),t("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10"},null),t("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10"},null)]}})}});C(function(i,a){var e=a.attrs;return function(){return t(T,e,{default:function(){return[t("rect",{x:"70",y:"15",rx:"4",ry:"4",width:"117",height:"6.4"},null),t("rect",{x:"70",y:"35",rx:"3",ry:"3",width:"85",height:"6.4"},null),t("rect",{x:"0",y:"80",rx:"3",ry:"3",width:"350",height:"6.4"},null),t("rect",{x:"0",y:"100",rx:"3",ry:"3",width:"380",height:"6.4"},null),t("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"201",height:"6.4"},null),t("circle",{cx:"30",cy:"30",r:"30"},null)]}})}});C(function(i,a){var e=a.attrs;return function(){return t(T,e,{default:function(){return[t("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"},null),t("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"},null),t("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"},null),t("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"},null),t("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"},null),t("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"},null)]}})}});C(function(i,a){var e=a.attrs;return function(){return t(T,xe(e,{viewBox:"0 0 400 480"}),{default:function(){return[t("circle",{cx:"30",cy:"30",r:"30"},null),t("rect",{x:"75",y:"13",rx:"4",ry:"4",width:"100",height:"13"},null),t("rect",{x:"75",y:"37",rx:"4",ry:"4",width:"50",height:"8"},null),t("rect",{x:"0",y:"70",rx:"5",ry:"5",width:"400",height:"400"},null)]}})}});const tt=s("rect",{x:"5",y:"10",rx:"3",ry:"3",width:"361",height:"28"},null,-1),st=s("rect",{x:"5",y:"26",rx:"3",ry:"3",width:"52",height:"6"},null,-1),at=s("rect",{x:"5",y:"61",rx:"3",ry:"3",width:"410",height:"16"},null,-1),rt=s("rect",{x:"680",y:"10",rx:"0",ry:"0",width:"80",height:"19"},null,-1),nt=C({__name:"QuizDetailsLoader",setup(i){return(a,e)=>(n(),U(le(T),{viewBox:"0 0 768 124",speed:2,primaryColor:"white",secondaryColor:"#e3e3e3"},{default:A(()=>[tt,st,at,rt]),_:1}))}}),k=i=>(Ee("data-v-1e954f66"),i=i(),Me(),i),it={key:0,class:"text-red-500 px-3 mt-5 rounded-xl-sm"},ot=k(()=>s("span",{class:"font-bold"},"Error:",-1)),lt={key:1},ct={key:0},ut={style:{cursor:"default"},class:"text-white text-base mb-5"},dt={key:0},ht={key:0},pt={key:1},ft={class:"flex gap-2"},_t={class:"align-middle"},yt={class:"leading-6 normal-case text-left"},wt={key:0,class:"text-red-500 px-3 mt-5 rounded-xl-sm"},gt=k(()=>s("span",{class:"font-bold"},"Error:",-1)),vt={class:"flex justify-between items-start mt-6 mb-20"},mt={key:0},xt={key:1},Ct={key:2,class:"pt-5"},kt=k(()=>s("h2",{class:"text-2xl text-white text-base mb-5 mt-10"}," You Solved the Quiz! ",-1)),bt={key:0},St=k(()=>s("p",{class:"text-white text-base mb-5 mt-10"},[x(" To claim the reward, enter your account address below. You will receive ROSE on the "),s("a",{href:"https://docs.oasis.io/dapp/sapphire/#chain-information",target:"_blank"},"Oasis Sapphire Testnet"),x(" chain. ")],-1)),It={class:"form-group"},$t=k(()=>s("label",{for:"addressText",class:"peer-focus:text-primaryDark peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-5"},[x(" Your address (0x...): "),s("span",{class:"text-red-500"},"*")],-1)),At={key:0,class:"normal-case"},Rt={key:1,class:"normal-case"},Et={key:3},Mt=k(()=>s("h2",{class:"text-white text-3xl mb-10"}," Congratulations, you won an NFT!: ",-1)),Tt={class:"featured-container"},Bt=["src"],Nt=k(()=>s("h3",{class:"text-white text-3xl mb-10"},"Reward claimed!",-1)),qt={class:"text-white"},Ot={class:"text-white mb-10"},Ut={key:0,class:"normal-case"},Lt={key:1,class:"normal-case"},Vt=k(()=>s("p",{class:"text-white"},[x(" Check out our "),s("a",{href:"https://docs.oasis.io/dapp/sapphire/quickstart",target:"_blank"},"Oasis Sapphire quickstart"),x(" and start building! ")],-1)),Ft=k(()=>s("p",{class:"text-white"},[x(" If you need help, contact us on the Oasis "),s("a",{href:"https://oasis.io/discord",target:"_blank"},"#dev-central Discord channel"),x(". ")],-1)),zt=C({__name:"QuizView",props:{coupon:{}},setup(i){const a=i,e=Ce(),r=ke(),_=be(),w=h([]),g=h(!1),p=h(!1),R=h(!1),f=h(!1),v=h([]),b=h([]),K=h(!1),Q=h([]),E=h("");h(!1);const j=h(!1),J=h(!1),Z=h(!1),Y=h(!1),B=h(!1),S=h([]),V=h("");function F(l,u){w.value=Array(),w.value.push(`${u}`),console.error(l)}async function ce(l,u){b.value[l]=BigInt(u);let c=!0;for(let d=0;d<b.value.length;d++)if(b.value[d]===void 0){c=!1;break}K.value=c}async function ue(){const[l,u]=await e.value.checkAnswers(a.coupon,b.value,ae);let c=!0;for(let d=0;d<l.length;d++)if(!l[d]){c=!1;break}J.value=!0,Z.value=c,Q.value=l}async function de(){try{g.value=!0,v.value=await e.value.getQuestions(a.coupon),Y.value=await e.value.isReward(),b.value=Array(v.value.length),j.value=!0}catch(l){F(l,"Coupon not valid")}finally{g.value=!1}}async function he(){try{console.log(E.value),g.value=!0,console.log("Debug: Fetching images");const l=await r.value.getOwnedTokens(E.value);console.log(l);for(let u=0;u<l.length;u++){console.log(l[u]);const d=(await r.value.tokenURI(l[u])).replace("ipfs://","https://ipfs.io/ipfs/"),y=await(await fetch(d)).json();S.value.push(y.image.replace("ipfs://","https://ipfs.io/ipfs/")),console.log(y)}}catch(l){F(l,"Image not valid")}finally{g.value=!1}}async function pe(l){if(l.target instanceof HTMLFormElement&&(l.target.checkValidity(),!l.target.reportValidity()))return;console.log("Debug: Claiming reward"),l.preventDefault();const u=100;let c=0;for(;!B.value&&c<u;)try{R.value=!0,console.log(E.value);let d;const I=await e.value.getGaslessKeyPair(),[y,N]=await e.value.checkAnswers(a.coupon,b.value,Ae(E.value));if(console.log(N),I[0]!==ae)console.log(y),console.log(N),d=await(await _.provider.broadcastTransaction(N)).wait(),console.log("Transaction confirmed"),B.value=!0,V.value=(await r.value.totalSupply()-BigInt(1)).toString();else{console.log("Requesting account access");const _e=await window.ethereum.request({method:"eth_chainId"}),W="0x5aff",ye="https://testnet.sapphire.oasis.io";_e!==W&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:W,rpcUrls:[ye],chainName:"sapphire-testnet",blockExplorerUrls:["https://explorer.oasis.io/testnet/sapphire"],nativeCurrency:{name:"ROSE",symbol:"ROSE",decimals:18}}]}),await window.ethereum.request({method:"eth_requestAccounts"}),console.log("MetaMask is connected and on the correct network");const we=await new ne(window.ethereum).getSigner(),ge=e.value.connect(we);try{const z=await ge.claimReward(N);console.log("Transaction sent:",z),await z.wait(),console.log("Transaction confirmed"),B.value=!0,V.value=(await r.value.totalSupply()-BigInt(1)).toString()}catch(z){console.error("User denied transaction signature or error occurred:",z);return}}}catch(d){++c==u&&F(d,"Error while claiming the reward")}await he(),R.value=!1}async function H(l){l.preventDefault();try{p.value=!0,await ue()}catch(u){F(u.reason,u.message)}finally{p.value=!1}}const fe=async()=>{try{if(f.value=!0,typeof window.ethereum<"u"){await window.ethereum.request({method:"eth_requestAccounts"});const u=await new ne(window.ethereum).getSigner(),c=S.value[S.value.length-1];console.log(c),console.log("Requesting account access");const d=await window.ethereum.request({method:"eth_chainId"}),I="0x5aff",y="https://testnet.sapphire.oasis.io";d!==I&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:I,rpcUrls:[y],chainName:"sapphire-testnet",nativeCurrency:{name:"ROSE",symbol:"ROSE",decimals:18}}]}),await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC721",options:{address:re,tokenId:V.value}}}),console.log("NFT added to MetaMask successfully")}else console.error("MetaMask is not installed")}catch(l){console.error("Error adding NFT to MetaMask:",l)}finally{f.value=!1}};return Se(async()=>{await de()}),(l,u)=>(n(),o(O,null,[w.value.length>0?(n(),o("div",it,[ot,(n(!0),o(O,null,P(w.value,c=>(n(),o("div",{key:c},$(c),1))),128))])):m("",!0),j.value&&!Z.value?(n(),o("section",lt,[v.value?(n(),o("div",ct,[s("form",{onSubmit:H},[(n(!0),o(O,null,P(Object.entries(v.value),([c,d])=>(n(),o("fieldset",{class:"mb-5",key:c},[s("p",ut,[x($(parseInt(c)+1)+". "+$(d.question)+" ",1),J.value?(n(),o("span",dt,[Q.value[parseInt(c)]?(n(),o("span",ht,"\u2705")):m("",!0),Q.value[parseInt(c)]?m("",!0):(n(),o("span",pt,"\u274C"))])):m("",!0)]),(n(!0),o(O,null,P(d.choices,(I,y)=>(n(),U(D,{key:y,class:Re([{selected:b.value[parseInt(c)]===BigInt(y),"pointer-events-none":g.value},"choice-btn mb-2 w-full"]),variant:"choice",onClick:N=>ce(parseInt(c),y)},{default:A(()=>[s("span",ft,[s("div",_t,[b.value[parseInt(c)]===BigInt(y)?(n(),U(Ke,{key:0})):(n(),U(et,{key:1}))]),s("span",yt,$(I),1)])]),_:2},1032,["class","onClick"]))),128))]))),128)),w.value.length>0?(n(),o("div",wt,[gt,(n(!0),o(O,null,P(w.value,c=>(n(),o("div",{key:c},$(c),1))),128))])):m("",!0),s("div",vt,[t(D,{type:"submit",variant:"primary",disabled:g.value||!K.value,onClick:H},{default:A(()=>[p.value?(n(),o("span",mt,"Checking answers\u2026")):(n(),o("span",xt,"Check my answers"))]),_:1},8,["disabled"])])],32)])):(n(),U(nt,{key:1}))])):m("",!0),Z.value&&!B.value?(n(),o("section",Ct,[t(ie,null,{default:A(()=>[kt]),_:1}),Y.value?(n(),o("section",bt,[St,s("form",{onSubmit:pe},[s("div",It,[Ie(s("input",{type:"text",id:"addressText",class:"peer",placeholder:" ","onUpdate:modelValue":u[0]||(u[0]=c=>E.value=c),pattern:"^(0x)?[0-9a-fA-F]{40}$",required:""},null,512),[[$e,E.value]]),$t]),t(D,{class:"mb-20 no-capitalize",type:"submit",variant:"primary",disabled:f.value},{default:A(()=>[f.value?(n(),o("span",At,"Generating transaction and sending reward\u2026")):(n(),o("span",Rt,"Claim your reward"))]),_:1},8,["disabled"])],32)])):m("",!0)])):m("",!0),B.value?(n(),o("section",Et,[t(ie,{class:"mb-20"},{default:A(()=>[Mt,s("div",Tt,[S.value.length>0?(n(),o("img",{src:S.value[S.value.length-1],key:S.value[S.value.length-1],alt:"Featured Reward Image",class:"featured-image"},null,8,Bt)):m("",!0)]),Nt,s("p",qt,[x(" Token ID: "),s("strong",null,$(V.value),1)]),s("p",Ot,[x(" NFT Contract Address: "),s("strong",null,$(le(re)),1)]),t(D,{class:"mb-20 no-capitalize",type:"submit",variant:"primary",onClick:fe},{default:A(()=>[f.value?(n(),o("span",Ut,"Adding NFT to MetaMask...")):(n(),o("span",Lt,"Add reward to wallet"))]),_:1}),Vt,Ft]),_:1})])):m("",!0)],64))}});const Zt=L(zt,[["__scopeId","data-v-1e954f66"]]);export{Zt as default};
//# sourceMappingURL=QuizView.bfa5eaad.js.map
